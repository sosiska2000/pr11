using System.Collections.Generic; // Использование коллекций List<T>

namespace APIGigaChatImageWPF.Models.Response // Пространство имен для моделей ответов WPF-приложения
{
    // Основной класс, представляющий ответ от GigaChat API на запрос генерации текста
    // Используется для десериализации JSON-ответов от чат-API GigaChat
    public class ChatResponse
    {
        // Список вариантов ответов, сгенерированных моделью
        // Обычно содержит один элемент, но может содержать несколько вариантов
        // Каждый Choice содержит полный ответ с текстом и метаданными
        public List<Choice> choices { get; set; }

        // Временная метка создания ответа в формате Unix time (секунды с 1 января 1970 года)
        // Тип long используется для хранения больших значений времени
        // Позволяет отслеживать, когда именно был сгенерирован ответ
        public long created { get; set; }

        // Название модели ИИ, которая использовалась для генерации ответа
        // Примеры: "GigaChat", "GigaChat-Plus", "GigaChat-Pro" и т.д.
        public string model { get; set; }

        // Тип объекта в ответе. Для чат-запросов обычно имеет значение "chat.completion"
        // Символ @ используется потому что "object" является зарезервированным словом в C#
        public string @object { get; set; }

        // Информация об использовании токенов для данного запроса
        // Содержит статистику по количеству использованных токенов во входных данных и ответе
        public Usage usage { get; set; }

        // Вложенный класс для хранения информации об использовании токенов
        public class Usage
        {
            // Количество токенов, использованных в сгенерированном ответе (completion)
            // Токены - это части текста, на которые модель разбивает и генерирует контент
            public int completion_tokens { get; set; }

            // Количество токенов, использованных во входном промпте (запросе)
            // Включает все сообщения из истории диалога, переданные в запросе
            public int prompt_tokens { get; set; }

            // Общее количество токенов: prompt_tokens + completion_tokens
            // Используется для расчета стоимости API-запроса и контроля лимитов
            public int total_tokens { get; set; }
        }

        // Вложенный класс, представляющий один вариант ответа от модели
        public class Choice
        {
            // Причина завершения генерации ответа
            // Возможные значения:
            // - "stop": модель завершила генерацию естественным образом
            // - "length": достигнут лимит max_tokens
            // - "content_filter": ответ отфильтрован системой безопасности
            // - "null": причина не указана
            public string finish_reason { get; set; }

            // Индекс данного варианта ответа в списке choices
            // Начинается с 0. Полезно при получении нескольких альтернативных ответов
            public int index { get; set; }

            // Объект сообщения, содержащий фактический ответ от ассистента
            // Включает роль отправителя и текстовое содержание
            public Message message { get; set; }
        }

        // Вложенный класс, представляющий одно сообщение в диалоге
        public class Message
        {
            // Роль отправителя сообщения в диалоге
            // В ответах от API всегда имеет значение "assistant"
            // В запросах может быть "user", "assistant" или "system"
            public string role { get; set; }

            // Текстовое содержание сообщения
            // Для ответов от API содержит сгенерированный моделью текст
            // Может содержать Markdown-разметку или простой текст
            public string content { get; set; }
        }
    }
}